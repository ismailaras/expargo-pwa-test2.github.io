(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{cwMR:function(e,t,n){"use strict";n.r(t),n.d(t,"PackagesPageModule",(function(){return F}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),r=n("mrSG"),c=function(e){return e[e.NotSetted=0]="NotSetted",e[e.AccessoryNoBattery=1]="AccessoryNoBattery",e[e.AccessoryWithBattery=2]="AccessoryWithBattery",e[e.AudioVideo=3]="AudioVideo",e[e.BagsAndLuggages=4]="BagsAndLuggages",e[e.BoardGames=5]="BoardGames",e[e.BooksAndCollectibles=6]="BooksAndCollectibles",e[e.ComputersAndLaptops=7]="ComputersAndLaptops",e[e.Cameras=8]="Cameras",e[e.Documents=9]="Documents",e[e.DryFoodAndSupplements=10]="DryFoodAndSupplements",e[e.Fashion=11]="Fashion",e[e.Gaming=12]="Gaming",e[e.HealthAndBeauty=13]="HealthAndBeauty",e[e.HomeAppliances=14]="HomeAppliances",e[e.HomeDecor=15]="HomeDecor",e[e.Jewelry=16]="Jewelry",e[e.MobilePhones=17]="MobilePhones",e[e.PetAccessory=18]="PetAccessory",e[e.Shoes=19]="Shoes",e[e.SportAndLeisure=20]="SportAndLeisure",e[e.Tablets=21]="Tablets",e[e.Toys=22]="Toys",e[e.Watches=23]="Watches",e}({}),l=function(e){return e[e.Declarations=0]="Declarations",e[e.NotCompleted=1]="NotCompleted",e[e.ExternalStorage=2]="ExternalStorage",e[e.OnWay=3]="OnWay",e[e.CustomsClearance=4]="CustomsClearance",e[e.InternalStorage=5]="InternalStorage",e[e.Delivered=6]="Delivered",e}({}),b=n("F27V"),u=n("AxNX"),d=n("Mky/"),g=n("fXoL"),h=n("0Inu"),m=n("qfBg"),p=n("ndxW"),f=n("Nm8O"),y=n("Ymxs"),P=n("e8h1");function k(e,t){if(1&e){const e=g.Qb();g.Pb(0,"ion-toolbar",1),g.Pb(1,"ion-searchbar",9),g.Xb("ngModelChange",(function(t){return g.oc(e),g.Zb().keyword=t}))("ionChange",(function(){return g.oc(e),g.Zb().search()})),g.Ob(),g.Ob()}if(2&e){const e=g.Zb();g.zb(1),g.gc("ngModel",e.keyword)}}function O(e,t){if(1&e&&(g.Pb(0,"ion-select-option",16),g.Pb(1,"span"),g.uc(2),g.Ob(),g.Ob()),2&e){const e=t.$implicit,n=t.index,i=g.Zb(3);g.gc("value",n),g.zb(2),g.vc(i.stateService.getPackageStateInAzerbaijani(e))}}function x(e,t){if(1&e){const e=g.Qb();g.Pb(0,"ion-item",14),g.Pb(1,"ion-label"),g.uc(2,"Filtr"),g.Ob(),g.Pb(3,"ion-select",15),g.Xb("ngModelChange",(function(t){return g.oc(e),g.Zb(2).filterKey=t}))("ionChange",(function(){return g.oc(e),g.Zb(2).filterPackages()})),g.Pb(4,"ion-select-option",16),g.uc(5," Filtr se\xe7ilm\u0259yib "),g.Ob(),g.sc(6,O,3,2,"ion-select-option",17),g.ac(7,"slice"),g.Ob(),g.Ob()}if(2&e){const e=g.Zb(2);g.zb(3),g.gc("ngModel",e.filterKey),g.zb(1),g.gc("value","none"),g.zb(2),g.gc("ngForOf",g.cc(7,3,e.packageStateData,1))}}function v(e,t){1&e&&(g.Pb(0,"ion-text",31),g.Pb(1,"p"),g.uc(2,"\xd6d\u0259ni\u015f g\xf6zl\u0259nilir"),g.Ob(),g.Ob())}function A(e,t){1&e&&(g.Pb(0,"ion-text",32),g.Pb(1,"p"),g.uc(2,"\xd6d\u0259ni\u015f edilib"),g.Ob(),g.Ob())}function C(e,t){if(1&e){const e=g.Qb();g.Pb(0,"ion-item-option",33),g.Xb("click",(function(){g.oc(e);const t=g.Zb().$implicit;return g.Zb(3).pay([t])})),g.Kb(1,"ion-icon",34),g.Pb(2,"ion-label"),g.uc(3," \xd6d\u0259 "),g.Ob(),g.Ob()}}function S(e,t){if(1&e){const e=g.Qb();g.Pb(0,"ion-col",19),g.Pb(1,"ion-item-sliding"),g.Pb(2,"ion-item",20),g.Pb(3,"ion-thumbnail",2),g.Kb(4,"ion-img",21),g.Ob(),g.Pb(5,"ion-label",22),g.Pb(6,"ion-text",23),g.Pb(7,"h3"),g.uc(8),g.Ob(),g.Ob(),g.Pb(9,"ion-text",24),g.Pb(10,"p"),g.uc(11),g.Ob(),g.Ob(),g.sc(12,v,3,0,"ion-text",25),g.sc(13,A,3,0,"ion-text",26),g.Pb(14,"p"),g.Pb(15,"ion-text",23),g.uc(16),g.ac(17,"currency"),g.Ob(),g.Ob(),g.Ob(),g.Ob(),g.Pb(18,"ion-item-options",27),g.sc(19,C,4,0,"ion-item-option",28),g.Pb(20,"ion-item-option",29),g.Xb("click",(function(){g.oc(e);const n=t.$implicit;return g.Zb(3).presentTrackingModal(n)})),g.Kb(21,"ion-icon",30),g.Pb(22,"ion-label"),g.uc(23," \u0130zl\u0259 "),g.Ob(),g.Ob(),g.Ob(),g.Ob(),g.Ob()}if(2&e){const e=t.$implicit,n=t.index,i=g.Zb(3);g.zb(2),g.ic("routerLink","/dashboard/packages/package/",e.id,""),g.gc("color",i.platform.is("mobile")&&n%2!=0?"light":null)("lines",i.platform.is("mobile")?"none":null),g.zb(2),g.gc("src","/assets/img/package_thumbnail.png"),g.zb(4),g.vc(e.id),g.zb(3),g.wc(" ",i.stateService.getPackageStateInAzerbaijani(e.current_state.toString())," "),g.zb(1),g.gc("ngIf",!e.is_paid),g.zb(1),g.gc("ngIf",e.is_paid),g.zb(3),g.xc("",e.weight," kq | ",g.bc(17,11,e.amount),""),g.zb(3),g.gc("ngIf",!e.is_paid)}}function z(e,t){if(1&e&&(g.Pb(0,"ion-grid"),g.Pb(1,"ion-row"),g.sc(2,S,24,13,"ion-col",18),g.Ob(),g.Ob()),2&e){const e=g.Zb(2);g.zb(2),g.gc("ngForOf",e.packages)}}function w(e,t){1&e&&(g.Pb(0,"ion-card",1),g.Pb(1,"ion-card-content"),g.uc(2," He\xe7 bir ba\u011flama tap\u0131lmad\u0131. "),g.Ob(),g.Ob())}function I(e,t){if(1&e){const e=g.Qb();g.Pb(0,"ion-content"),g.Pb(1,"ion-refresher",10),g.Xb("ionRefresh",(function(){return g.oc(e),g.Zb().doRefresh()})),g.Kb(2,"ion-refresher-content"),g.Ob(),g.sc(3,x,8,6,"ion-item",11),g.sc(4,z,3,1,"ion-grid",12),g.sc(5,w,3,0,"ng-template",null,13,g.tc),g.Ob()}if(2&e){const e=g.mc(6),t=g.Zb();g.zb(3),g.gc("ngIf",t.isFilterActive),g.zb(1),g.gc("ngIf",t.packages.length>0)("ngIfElse",e)}}function B(e,t){1&e&&(g.Pb(0,"ion-content"),g.Pb(1,"ion-grid",35),g.Pb(2,"ion-row",36),g.Pb(3,"ion-col",37),g.Kb(4,"ion-spinner",23),g.Ob(),g.Ob(),g.Ob(),g.Ob())}const L=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,a,s,r,c){this.packageService=e,this.platform=t,this.userService=n,this.stateService=i,this.alertCtrl=o,this.helper=a,this.toaster=s,this.modalController=r,this.storage=c,this.isFilterActive=!0,this.isSearchActive=!1,this.packages=[],this.isLoading=!1,this.filterKey="none",this.amount=0,this.user=new d.a}ionViewWillEnter(){this.filterPackages()}ngOnInit(){}presentTrackingModal(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:b.a,swipeToClose:!0,componentProps:{states:e.states}});return yield t.present()}))}showAlert(e){this.alertCtrl.create({header:"X\u0259ta a\u015fkarland\u0131",message:e,buttons:["Tamam"]}).then(e=>e.present())}filterPackages(){this.isLoading=!0,this.storage.get("access_token").then(e=>{this.packageService.getPackages(this.helper.decodeToken(e).identity).subscribe(e=>{this.packages="none"!==this.filterKey?e.filter(e=>l[e.current_state.toString()]===Number(this.filterKey)):e,this.isLoading=!1},e=>{this.isLoading=!1,404!==e.status&&this.showAlert("Bilinm\u0259y\u0259n bir x\u0259ta ba\u015f verdi. Z\u0259hm\u0259t olmasa, daha sonra t\u0259krar yoxlay\u0131n.")})})}get productCategoryData(){return Object.keys(c).filter(e=>!isNaN(Number(c[e])))}get packageStateData(){return Object.keys(l).filter(e=>!isNaN(Number(l[e])))}doRefresh(){this.filterPackages()}search(){}presentCheckoutModal(e,t){return Object(r.a)(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:u.a,swipeToClose:!0,cssClass:"checkoutModal",componentProps:{amount:e,currency:t}});return yield n.present()}))}showConfirm(e,t){this.alertCtrl.create({header:"\xd6d\u0259ni\u015f et",message:e,buttons:[{text:"L\u0259v\u011f et",role:"cancel"},{text:"Balans art\u0131r",handler:()=>{this.presentCheckoutModal(this.amount,"USD").then(e=>console.log(e))}},{text:"Tamamla",handler:()=>{this.completePayment(t)}}]}).then(e=>e.present())}pay(e){this.isLoading=!0,this.storage.get("access_token").then(t=>{this.userService.getDetail(this.helper.decodeToken(t).identity).subscribe(t=>{this.isLoading=!1,this.user=t;const n=e.filter(e=>!e.is_paid);this.getPackagesAmount(n),0!==this.amount?this.showConfirm(`\n                    Hal-haz\u0131rk\u0131 balans: $${this.user.wallet_usd.toFixed(2)}<br>\n                    Natamam m\u0259bl\u0259\u011f: $${this.amount.toFixed(2)}<br>\n                    <hr>\n                    <small>Balans\u0131n\u0131zda kifay\u0259t q\u0259d\u0259r v\u0259sait yoxdursa, z\u0259hm\u0259t olmasa, balans art\u0131r d\xfcym\u0259sini s\u0131x\u0131n.</small>\n                `,n):this.showAlert("Natamam \xf6d\u0259ni\u015fli ba\u011flama tap\u0131lmad\u0131.")},e=>{this.isLoading=!1,this.showAlert("Bilinm\u0259y\u0259n bir x\u0259ta ba\u015f verdi. Z\u0259hm\u0259t olmasa, daha sonra t\u0259krar yoxlay\u0131n.")})})}getPackagesAmount(e){this.amount=0,e.forEach(e=>this.amount+=e.amount)}completePayment(e){this.packageService.setPackagesToPaid(e,this.amount,this.user.id).subscribe(e=>{"User's wallet is not enough for payment."===JSON.parse(e).message?this.toaster.danger("Balans\u0131n\u0131zda kifay\u0259t q\u0259d\u0259r v\u0259sait yoxdur."):(this.filterPackages(),this.toaster.success("\xd6d\u0259ni\u015finiz u\u011furla ba\u015fa \xe7atd\u0131."))},e=>{this.showAlert("Bilinm\u0259y\u0259n bir x\u0259ta ba\u015f verdi. Z\u0259hm\u0259t olmasa, daha sonra t\u0259krar yoxlay\u0131n.")})}}return e.\u0275fac=function(t){return new(t||e)(g.Jb(h.a),g.Jb(a.ib),g.Jb(m.a),g.Jb(p.a),g.Jb(a.a),g.Jb(f.b),g.Jb(y.a),g.Jb(a.fb),g.Jb(P.b))},e.\u0275cmp=g.Db({type:e,selectors:[["app-packages"]],decls:14,vars:4,consts:[[3,"translucent"],["color","tertiary"],["slot","start"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","md","card-sharp","ios","card-outline"],["slot","icon-only","md","filter-sharp","ios","filter-outline"],["color","tertiary",4,"ngIf"],[4,"ngIf"],["color","tertiary","placeholder","Axtar",1,"ion-no-padding",3,"ngModel","ngModelChange","ionChange"],["slot","fixed",3,"ionRefresh"],["lines","full","color","light",4,"ngIf"],[4,"ngIf","ngIfElse"],["notPackages",""],["lines","full","color","light"],["multiple","false","cancelText","Ba\u011fla","okText","T\u018fSD\u0130QL\u018f",3,"ngModel","ngModelChange","ionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["size-md","6","size","12",4,"ngFor","ngForOf"],["size-md","6","size","12"],["button","",3,"routerLink","color","lines"],[1,"ion-padding",3,"src"],[1,"ion-text-wrap"],["color","primary"],["color","secondary"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["side","end"],["color","medium","expandable","",3,"click",4,"ngIf"],["color","tertiary","expandable","",3,"click"],["slot","top","ios","airplane-outline","md","airplane-sharp"],["color","danger"],["color","success"],["color","medium","expandable","",3,"click"],["slot","top","ios","card-outline","md","card-sharp"],[2,"height","100%"],[1,"ion-justify-content-center","ion-align-items-center",2,"height","100%"],[1,"ion-text-center"]],template:function(e,t){1&e&&(g.Pb(0,"ion-header",0),g.Pb(1,"ion-toolbar",1),g.Pb(2,"ion-buttons",2),g.Kb(3,"ion-menu-button"),g.Ob(),g.Pb(4,"ion-title"),g.uc(5,"Ba\u011flamalar"),g.Ob(),g.Pb(6,"ion-buttons",3),g.Pb(7,"ion-button",4),g.Xb("click",(function(){return t.pay(t.packages)})),g.Kb(8,"ion-icon",5),g.Ob(),g.Pb(9,"ion-button",4),g.Xb("click",(function(){return t.isFilterActive=!t.isFilterActive})),g.Kb(10,"ion-icon",6),g.Ob(),g.Ob(),g.Ob(),g.sc(11,k,2,1,"ion-toolbar",7),g.Ob(),g.sc(12,I,7,3,"ion-content",8),g.sc(13,B,5,0,"ion-content",8)),2&e&&(g.gc("translucent",!1),g.zb(11),g.gc("ngIf",t.isSearchActive),g.zb(1),g.gc("ngIf",!t.isLoading),g.zb(1),g.gc("ngIf",t.isLoading))},directives:[a.t,a.bb,a.h,a.F,a.ab,a.g,a.u,i.k,a.O,a.nb,o.f,o.i,a.p,a.K,a.L,a.x,a.B,a.R,a.mb,a.S,i.j,a.s,a.N,a.o,a.A,a.lb,s.h,a.Z,a.v,a.Y,a.z,a.y,a.i,a.j,a.W],pipes:[i.r,i.c],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size:100px}"]}),e})()},{path:"express-service",loadChildren:()=>n.e(0).then(n.bind(null,"D8gZ")).then(e=>e.ExpressServicePageModule)},{path:"postal-service",loadChildren:()=>n.e(0).then(n.bind(null,"uD0H")).then(e=>e.PostalServicePageModule)}];let M=(()=>{class e{}return e.\u0275mod=g.Hb({type:e}),e.\u0275inj=g.Gb({factory:function(t){return new(t||e)},imports:[[s.j.forChild(L)],s.j]}),e})(),F=(()=>{class e{}return e.\u0275mod=g.Hb({type:e}),e.\u0275inj=g.Gb({factory:function(t){return new(t||e)},imports:[[i.b,o.a,a.cb,M]]}),e})()}}]);