(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{cwMR:function(t,e,n){"use strict";n.r(e),n.d(e,"PackagesPageModule",(function(){return K}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),s=n("mrSG"),c=n("dvAk"),l=function(t){return t[t.Declarations=0]="Declarations",t[t.NotCompleted=1]="NotCompleted",t[t.ExternalStorage=2]="ExternalStorage",t[t.OnWay=3]="OnWay",t[t.CustomsClearance=4]="CustomsClearance",t[t.InternalStorage=5]="InternalStorage",t[t.Delivered=6]="Delivered",t}({}),b=n("F27V"),g=n("AxNX"),h=n("Mky/"),u=n("fXoL"),d=n("0Inu"),p=n("qfBg"),m=n("ndxW"),f=n("Nm8O"),y=n("Ymxs"),P=n("e8h1");function k(t,e){if(1&t){const t=u.Qb();u.Pb(0,"ion-toolbar",1),u.Pb(1,"ion-searchbar",9),u.Xb("ngModelChange",(function(e){return u.oc(t),u.Zb().keyword=e}))("ionChange",(function(){return u.oc(t),u.Zb().search()})),u.Ob(),u.Ob()}if(2&t){const t=u.Zb();u.yb(1),u.gc("ngModel",t.keyword)}}function O(t,e){if(1&t&&(u.Pb(0,"ion-select-option",16),u.Pb(1,"span"),u.vc(2),u.Ob(),u.Ob()),2&t){const t=e.$implicit,n=e.index,i=u.Zb(3);u.gc("value",n),u.yb(2),u.wc(i.stateService.getPackageStateInAzerbaijani(t))}}function v(t,e){if(1&t){const t=u.Qb();u.Pb(0,"ion-item",14),u.Pb(1,"ion-label"),u.vc(2,"Filtr"),u.Ob(),u.Pb(3,"ion-select",15),u.Xb("ngModelChange",(function(e){return u.oc(t),u.Zb(2).filterKey=e}))("ionChange",(function(){return u.oc(t),u.Zb(2).filterPackages()})),u.Pb(4,"ion-select-option",16),u.vc(5," Filtr se\xe7ilm\u0259yib "),u.Ob(),u.tc(6,O,3,2,"ion-select-option",17),u.ac(7,"slice"),u.Ob(),u.Ob()}if(2&t){const t=u.Zb(2);u.yb(3),u.gc("ngModel",t.filterKey),u.yb(1),u.gc("value","none"),u.yb(2),u.gc("ngForOf",u.cc(7,3,t.packageStateData,1))}}function x(t,e){1&t&&(u.Pb(0,"ion-text",31),u.Pb(1,"p"),u.vc(2,"\xd6d\u0259ni\u015f g\xf6zl\u0259nilir"),u.Ob(),u.Ob())}function C(t,e){1&t&&(u.Pb(0,"ion-text",32),u.Pb(1,"p"),u.vc(2,"\xd6d\u0259ni\u015f edilib"),u.Ob(),u.Ob())}function w(t,e){if(1&t){const t=u.Qb();u.Pb(0,"ion-item-option",33),u.Xb("click",(function(){u.oc(t);const e=u.Zb().$implicit;return u.Zb(3).pay([e])})),u.Kb(1,"ion-icon",34),u.Pb(2,"ion-label"),u.vc(3," \xd6d\u0259 "),u.Ob(),u.Ob()}}function S(t,e){if(1&t){const t=u.Qb();u.Pb(0,"ion-col",19),u.Pb(1,"ion-item-sliding"),u.Pb(2,"ion-item",20),u.Pb(3,"ion-thumbnail",2),u.Kb(4,"ion-img",21),u.Ob(),u.Pb(5,"ion-label",22),u.Pb(6,"ion-text",23),u.Pb(7,"h3"),u.vc(8),u.Ob(),u.Ob(),u.Pb(9,"ion-text",24),u.Pb(10,"p"),u.vc(11),u.Ob(),u.Ob(),u.tc(12,x,3,0,"ion-text",25),u.tc(13,C,3,0,"ion-text",26),u.Pb(14,"p"),u.Pb(15,"ion-text",23),u.vc(16),u.ac(17,"currency"),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(18,"ion-item-options",27),u.tc(19,w,4,0,"ion-item-option",28),u.Pb(20,"ion-item-option",29),u.Xb("click",(function(){u.oc(t);const n=e.$implicit;return u.Zb(3).presentTrackingModal(n)})),u.Kb(21,"ion-icon",30),u.Pb(22,"ion-label"),u.vc(23," \u0130zl\u0259 "),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob()}if(2&t){const t=e.$implicit,n=e.index,i=u.Zb(3);u.yb(2),u.ic("routerLink","/dashboard/packages/package/",t.id,""),u.gc("color",i.platform.is("mobile")&&n%2!=0?"light":null)("lines",i.platform.is("mobile")?"none":null),u.yb(2),u.gc("src","/assets/img/package_thumbnail.png"),u.yb(4),u.wc(t.id),u.yb(3),u.xc(" ",i.stateService.getPackageStateInAzerbaijani(t.current_state.toString())," "),u.yb(1),u.gc("ngIf",!t.is_paid),u.yb(1),u.gc("ngIf",t.is_paid),u.yb(3),u.yc("",t.weight," kq | ",u.bc(17,11,t.amount),""),u.yb(3),u.gc("ngIf",!t.is_paid)}}function I(t,e){if(1&t&&(u.Pb(0,"ion-grid"),u.Pb(1,"ion-row"),u.tc(2,S,24,13,"ion-col",18),u.Ob(),u.Ob()),2&t){const t=u.Zb(2);u.yb(2),u.gc("ngForOf",t.packages)}}function M(t,e){1&t&&(u.Pb(0,"ion-card",35),u.Pb(1,"ion-card-content"),u.vc(2," He\xe7 bir ba\u011flama tap\u0131lmad\u0131. "),u.Ob(),u.Ob())}function A(t,e){if(1&t){const t=u.Qb();u.Pb(0,"ion-content"),u.Pb(1,"ion-refresher",10),u.Xb("ionRefresh",(function(){return u.oc(t),u.Zb().doRefresh()})),u.Kb(2,"ion-refresher-content"),u.Ob(),u.tc(3,v,8,6,"ion-item",11),u.tc(4,I,3,1,"ion-grid",12),u.tc(5,M,3,0,"ng-template",null,13,u.uc),u.Ob()}if(2&t){const t=u.mc(6),e=u.Zb();u.yb(3),u.gc("ngIf",e.isFilterActive),u.yb(1),u.gc("ngIf",e.packages.length>0)("ngIfElse",t)}}function Z(t,e){1&t&&(u.Pb(0,"ion-content"),u.Pb(1,"ion-grid",36),u.Pb(2,"ion-row",37),u.Pb(3,"ion-col",38),u.Kb(4,"ion-img",39),u.Ob(),u.Ob(),u.Ob(),u.Ob())}const F=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,a,r,s,c){this.packageService=t,this.platform=e,this.userService=n,this.stateService=i,this.alertCtrl=o,this.helper=a,this.toaster=r,this.modalController=s,this.storage=c,this.isFilterActive=!0,this.isSearchActive=!1,this.packages=[],this.isLoading=!1,this.filterKey="none",this.amount=0,this.user=new h.a}ionViewWillEnter(){this.getPackages()}ngOnInit(){}presentTrackingModal(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:b.a,swipeToClose:!0,componentProps:{states:t.states}});return yield e.present()}))}showAlert(t){this.alertCtrl.create({header:"X\u0259ta a\u015fkarland\u0131",message:t,buttons:["Tamam"]}).then(t=>t.present())}getPackages(){this.storage.get("user").then(t=>{this.user=t,this.packages=t.packages})}filterPackages(){this.isLoading=!0,this.storage.get("access_token").then(t=>{this.packageService.getPackages(this.user.id).subscribe(t=>{this.user.packages=t,this.storage.set("user",this.user).then(e=>{this.packages="none"!==this.filterKey?t.filter(t=>l[t.current_state.toString()]===Number(this.filterKey)):t,this.isLoading=!1})},t=>{this.isLoading=!1,404!==t.status&&this.showAlert("Bilinm\u0259y\u0259n bir x\u0259ta ba\u015f verdi. Z\u0259hm\u0259t olmasa, daha sonra t\u0259krar yoxlay\u0131n.")})})}get productCategoryData(){return Object.keys(c.a).filter(t=>!isNaN(Number(c.a[t])))}get packageStateData(){return Object.keys(l).filter(t=>!isNaN(Number(l[t])))}doRefresh(){this.filterPackages()}search(){}presentCheckoutModal(t,e){return Object(s.a)(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:g.a,swipeToClose:!0,cssClass:"checkoutModal",componentProps:{amount:t,currency:e}});return yield n.present()}))}showConfirm(t,e){this.alertCtrl.create({header:"\xd6d\u0259ni\u015f et",message:t,buttons:[{text:"L\u0259v\u011f et",role:"cancel"},{text:"Balans art\u0131r",handler:()=>{this.presentCheckoutModal(this.amount,"USD").then(t=>console.log(t))}},{text:"Tamamla",handler:()=>{this.completePayment(e)}}]}).then(t=>t.present())}pay(t){const e=t.filter(t=>!t.is_paid);this.getPackagesAmount(e),0!==this.amount?this.showConfirm(`\n                            Hal-haz\u0131rk\u0131 balans: $${this.user.wallet_usd.toFixed(2)}<br>\n                            Da\u015f\u0131nma haqq\u0131: $${this.amount.toFixed(2)}<br>\n                            <hr>\n                            <small>Balans\u0131n\u0131zda kifay\u0259t q\u0259d\u0259r v\u0259sait yoxdursa, z\u0259hm\u0259t olmasa, balans art\u0131r d\xfcym\u0259sini s\u0131x\u0131n.</small>\n                        `,e):this.showAlert("Natamam \xf6d\u0259ni\u015fli ba\u011flama tap\u0131lmad\u0131.")}getPackagesAmount(t){this.amount=0,t.forEach(t=>this.amount+=t.amount)}completePayment(t){this.packageService.setPackagesToPaid(t,this.amount,this.user.id).subscribe(t=>{"User's wallet is not enough for payment."===JSON.parse(t).message?this.toaster.danger("Balans\u0131n\u0131zda kifay\u0259t q\u0259d\u0259r v\u0259sait yoxdur."):(this.filterPackages(),this.toaster.success("\xd6d\u0259ni\u015finiz u\u011furla ba\u015fa \xe7atd\u0131."))},t=>{this.showAlert("Bilinm\u0259y\u0259n bir x\u0259ta ba\u015f verdi. Z\u0259hm\u0259t olmasa, daha sonra t\u0259krar yoxlay\u0131n.")})}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(d.a),u.Jb(a.hb),u.Jb(p.a),u.Jb(m.a),u.Jb(a.a),u.Jb(f.b),u.Jb(y.a),u.Jb(a.eb),u.Jb(P.b))},t.\u0275cmp=u.Db({type:t,selectors:[["app-packages"]],decls:14,vars:4,consts:[[3,"translucent"],["color","tertiary"],["slot","start"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","md","card-sharp","ios","card-outline"],["slot","icon-only","md","filter-sharp","ios","filter-outline"],["color","tertiary",4,"ngIf"],[4,"ngIf"],["color","tertiary","placeholder","Axtar",1,"ion-no-padding",3,"ngModel","ngModelChange","ionChange"],["slot","fixed",3,"ionRefresh"],["lines","full","color","light",4,"ngIf"],[4,"ngIf","ngIfElse"],["notPackages",""],["lines","full","color","light"],["multiple","false","cancelText","Ba\u011fla","okText","T\u018fSD\u0130QL\u018f",3,"ngModel","ngModelChange","ionChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["size-md","6","size","12",4,"ngFor","ngForOf"],["size-md","6","size","12"],["button","",3,"routerLink","color","lines"],[1,"ion-padding",3,"src"],[1,"ion-text-wrap"],["color","primary"],["color","secondary"],["color","danger",4,"ngIf"],["color","success",4,"ngIf"],["side","end"],["color","medium","expandable","",3,"click",4,"ngIf"],["color","tertiary","expandable","",3,"click"],["slot","top","ios","airplane-outline","md","airplane-sharp"],["color","danger"],["color","success"],["color","medium","expandable","",3,"click"],["slot","top","ios","card-outline","md","card-sharp"],["color","alert"],[2,"height","100%"],[1,"ion-justify-content-center","ion-align-items-center",2,"height","100%"],[1,"ion-text-center",2,"display","flex","justify-content","center","align-items","center"],["src","../assets/img/loading.gif",2,"width","100px","height","100px"]],template:function(t,e){1&t&&(u.Pb(0,"ion-header",0),u.Pb(1,"ion-toolbar",1),u.Pb(2,"ion-buttons",2),u.Kb(3,"ion-menu-button"),u.Ob(),u.Pb(4,"ion-title"),u.vc(5,"Ba\u011flamalar"),u.Ob(),u.Pb(6,"ion-buttons",3),u.Pb(7,"ion-button",4),u.Xb("click",(function(){return e.pay(e.packages)})),u.Kb(8,"ion-icon",5),u.Ob(),u.Pb(9,"ion-button",4),u.Xb("click",(function(){return e.isFilterActive=!e.isFilterActive})),u.Kb(10,"ion-icon",6),u.Ob(),u.Ob(),u.Ob(),u.tc(11,k,2,1,"ion-toolbar",7),u.Ob(),u.tc(12,A,7,3,"ion-content",8),u.tc(13,Z,5,0,"ion-content",8)),2&t&&(u.gc("translucent",!1),u.yb(11),u.gc("ngIf",e.isSearchActive),u.yb(1),u.gc("ngIf",!e.isLoading),u.yb(1),u.gc("ngIf",e.isLoading))},directives:[a.t,a.ab,a.h,a.F,a.Z,a.g,a.u,i.k,a.N,a.mb,o.f,o.i,a.p,a.J,a.K,a.x,a.B,a.Q,a.lb,a.R,i.j,a.s,a.M,a.o,a.A,a.kb,r.h,a.Y,a.v,a.W,a.z,a.y,a.i,a.j],pipes:[i.r,i.c],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size:100px;height:100%}"]}),t})()},{path:"express-service",loadChildren:()=>n.e(0).then(n.bind(null,"D8gZ")).then(t=>t.ExpressServicePageModule)},{path:"postal-service",loadChildren:()=>n.e(0).then(n.bind(null,"uD0H")).then(t=>t.PostalServicePageModule)},{path:"courier-service",loadChildren:()=>n.e(0).then(n.bind(null,"drLq")).then(t=>t.CourierServicePageModule)}];let z=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(F)],r.j]}),t})(),K=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[i.b,o.a,a.bb,z]]}),t})()}}]);